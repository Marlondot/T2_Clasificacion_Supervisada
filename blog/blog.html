<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.179">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniel Daza Macias">
<meta name="author" content="Daniel Santiago Cadavid Montoya">
<meta name="author" content="Jose Daniel Bustamante Arango">
<meta name="author" content="Marlon Calle Areiza">
<meta name="author" content="Ronald Gabriel Palencia">

<title>Creacion ScoreCard</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="blog_files/libs/clipboard/clipboard.min.js"></script>
<script src="blog_files/libs/quarto-html/quarto.js"></script>
<script src="blog_files/libs/quarto-html/popper.min.js"></script>
<script src="blog_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="blog_files/libs/quarto-html/anchor.min.js"></script>
<link href="blog_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="blog_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="blog_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="blog_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="blog_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="blog_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="blog_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción">Introducción</a></li>
  <li><a href="#importe-y-análisis-de-datos" id="toc-importe-y-análisis-de-datos" class="nav-link" data-scroll-target="#importe-y-análisis-de-datos">Importe y análisis de datos</a>
  <ul class="collapse">
  <li><a href="#selección-y-transformación-de-variables" id="toc-selección-y-transformación-de-variables" class="nav-link" data-scroll-target="#selección-y-transformación-de-variables">Selección y transformación de variables</a></li>
  </ul></li>
  <li><a href="#selección-de-variables-a-partir-de-woe-y-valor-de-información-iv" id="toc-selección-de-variables-a-partir-de-woe-y-valor-de-información-iv" class="nav-link" data-scroll-target="#selección-de-variables-a-partir-de-woe-y-valor-de-información-iv">Selección de variables a partir de WoE y Valor de Información (IV)</a>
  <ul class="collapse">
  <li><a href="#análisis-de-iv-para-variables-categóricas" id="toc-análisis-de-iv-para-variables-categóricas" class="nav-link" data-scroll-target="#análisis-de-iv-para-variables-categóricas">Análisis de IV para variables categóricas</a></li>
  <li><a href="#análisis-de-iv-para-numéricas" id="toc-análisis-de-iv-para-numéricas" class="nav-link" data-scroll-target="#análisis-de-iv-para-numéricas">Análisis de IV para numéricas</a></li>
  </ul></li>
  <li><a href="#ajuste-del-modelo-y-realización-de-scorecard" id="toc-ajuste-del-modelo-y-realización-de-scorecard" class="nav-link" data-scroll-target="#ajuste-del-modelo-y-realización-de-scorecard">Ajuste del modelo y realización de Scorecard</a>
  <ul class="collapse">
  <li><a href="#ajuste-del-modelo" id="toc-ajuste-del-modelo" class="nav-link" data-scroll-target="#ajuste-del-modelo">Ajuste del modelo</a></li>
  <li><a href="#creación-de-scorecard" id="toc-creación-de-scorecard" class="nav-link" data-scroll-target="#creación-de-scorecard">Creación de scorecard</a></li>
  </ul></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias">Referencias</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Creacion ScoreCard</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Daniel Daza Macias </p>
             <p>Daniel Santiago Cadavid Montoya </p>
             <p>Jose Daniel Bustamante Arango </p>
             <p>Marlon Calle Areiza </p>
             <p>Ronald Gabriel Palencia </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="introducción" class="level2">
<h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<p>El siguiente trabajo tiene como objetivo la realización de una scorecard que ubique a las personas en un punto de [TODO]</p>
<p>Para realizar utilizamos la base de datos proporcionada por <span class="citation" data-cites="DataWebsite">U.S. Department of Education (<a href="#ref-DataWebsite" role="doc-biblioref">2016</a>)</span>.</p>
</section>
<section id="importe-y-análisis-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="importe-y-análisis-de-datos">Importe y análisis de datos</h2>
<p>Para comenzar se hará un cargue del conjunto de datos:</p>
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<div id="tbl-import-presentacion-inicial" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;1:  Datos iniciales </caption>
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>member_id</th>
      <th>...</th>
      <th>total_cu_tl</th>
      <th>inq_last_12m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1077501</td>
      <td>1296599</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1077430</td>
      <td>1314167</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1077175</td>
      <td>1313524</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1076863</td>
      <td>1277178</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1075358</td>
      <td>1311748</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 74 columns</p>
</div>
</div>
</div>
</div>
<p>Como se puede ver en <a href="#tbl-import-presentacion-inicial">Table&nbsp;1</a> la base de datos contiene 74 columnas además de 466285 observaciones.</p>
<p>Por otra parte nuestra variable de interés será loan_status o estado del prestamo de cada observación que tiene entre posibles valores: ‘Fully Paid’, ‘Charged Off’, ‘Current’, ‘Default’, ‘Late (31-120 days)’,‘In Grace Period’, ‘Late (16-30 days)’, ‘Does not meet the credit policy. Status:Fully Paid’ y ‘Does not meet the credit policy. Status:Charged Off’. Así y como nuestro objetivo parte de la clasificación en dos grupos partiremos de esta variable para otorgar a cada observación el valor de: incumplió con obligaciones financieras (0 en la nueva columna creada ‘Obligaciones_financieras’) o cumplió con las obligaciones financieras(1 en la nueva columna creada ‘Obligaciones_financieras’), el primero siendo equivalente a los valores ‘Charged Off’, ‘Default’, ‘Late (31-120 days)’ y ‘Does not meet the credit policy. Status:Charged Off’ en ‘loan_status’.</p>
<section id="selección-y-transformación-de-variables" class="level3">
<h3 class="anchored" data-anchor-id="selección-y-transformación-de-variables">Selección y transformación de variables</h3>
<p>Para comenzar a seleccionar variables y como nuestro interés de acuerdo al objetivo es tener la mayor cantidad de datos sin imputar obviaremos para el ajuste del modelo aquellas cuya cantidad de datos nulos sea mayor al 70%, dichas variables se pueden ver en <a href="#tbl-variables-nulos">Table&nbsp;2</a></p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<div id="tbl-variables-nulos" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;2: Variables con porcentaje de nulo mayor al 30%</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Porcentaje de datos nulos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">desc</td>
<td style="text-align: right;">0.729815</td>
</tr>
<tr class="even">
<td style="text-align: left;">mths_since_last_record</td>
<td style="text-align: right;">0.865666</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mths_since_last_major_derog</td>
<td style="text-align: right;">0.787739</td>
</tr>
<tr class="even">
<td style="text-align: left;">annual_inc_joint</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dti_joint</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">verification_status_joint</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">open_acc_6m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">open_il_6m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">open_il_12m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">open_il_24m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mths_since_rcnt_il</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_bal_il</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">il_util</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">open_rv_12m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">open_rv_24m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">max_bal_bc</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">all_util</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">inq_fi</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total_cu_tl</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">inq_last_12m</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Además de esto eliminaremos las variables: ‘id’, ‘member_id’, ‘sub_grade’, ‘emp_title’, ‘url’, ‘title’, ‘zip_code’, ‘next_pymnt_d’, ‘recoveries’, ‘collection_recovery_fee’, ‘total_rec_prncp’, ‘total_rec_late_fee’ y ‘policy_code’, que consideramos no aportan mucha información a la hora de definir las obligaciones económicas de una persona.</p>
<p>Procederemos a realizar una matriz de correlación de Pearson para ver qué variables podrían ser explicadas por otras y obviarlas:</p>
<div id="fig-matriz-corr-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="fig_1_corr_pearson.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Matriz de correlacion</figcaption><p></p>
</figure>
</div>
<p>Así y de acuerdo <a href="#fig-matriz-corr-1">Figure&nbsp;2</a> se eliminarán aquellas columnas que posean un correlación de al menos 60% es decir las variables: ‘total_rec_int’, ‘total_pymnt_inv’, ‘total_pymnt’, ‘installment’, ‘funded_amnt’, ‘funded_amnt_inv’, ‘out_prncp_inv’, ‘total_acc’ y ‘total_rev_hi_lim’.</p>
<p>Al final resultaríamos con las variables encontradas en <a href="#tbl-variables-resultantes">Table&nbsp;3</a>, donde aquellas de tipo object son las que reconoceremos como categóricas para posterior análisis y transformación:</p>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div id="tbl-variables-resultantes" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;3: Variables resultantes y tipos</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Porcentaje de datos nulos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">loan_amnt</td>
<td style="text-align: left;">int64</td>
</tr>
<tr class="even">
<td style="text-align: left;">term</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">int_rate</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">grade</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">emp_length</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">home_ownership</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">annual_inc</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">verification_status</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">issue_d</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">loan_status</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pymnt_plan</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">purpose</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">addr_state</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">dti</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">delinq_2yrs</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">earliest_cr_line</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">inq_last_6mths</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">mths_since_last_delinq</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">open_acc</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">pub_rec</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">revol_bal</td>
<td style="text-align: left;">int64</td>
</tr>
<tr class="even">
<td style="text-align: left;">revol_util</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initial_list_status</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">out_prncp</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">last_pymnt_d</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">last_pymnt_amnt</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">last_credit_pull_d</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">collections_12_mths_ex_med</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">application_type</td>
<td style="text-align: left;">object</td>
</tr>
<tr class="even">
<td style="text-align: left;">acc_now_delinq</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tot_coll_amt</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="even">
<td style="text-align: left;">tot_cur_bal</td>
<td style="text-align: left;">float64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Obligaciones_financieras</td>
<td style="text-align: left;">int32</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<section id="transformación-de-variables-categóricas" class="level4">
<h4 class="anchored" data-anchor-id="transformación-de-variables-categóricas">Transformación de variables categóricas</h4>
<p>Para comenzar cambiaremos los valores categóricos de la variable emp_length por la cantidad de años como se puede observar en <a href="#tbl-cam-var-1">Table&nbsp;4</a>.</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="6">
<div id="tbl-cam-var-1" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;4: Cambio en variable emp_length</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Valor</th>
<th style="text-align: right;">Nuevo valor</th>
<th style="text-align: right;">Cantidad de datos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">10+ years</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">150049</td>
</tr>
<tr class="even">
<td style="text-align: left;">2 years</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">41373</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3 years</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">36596</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt; 1 year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">36265</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5 years</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">30774</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 year</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">29622</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4 years</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">28023</td>
</tr>
<tr class="even">
<td style="text-align: left;">7 years</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">26180</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6 years</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26112</td>
</tr>
<tr class="even">
<td style="text-align: left;">8 years</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">22395</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9 years</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">17888</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Continuando, se pasará a eliminar la columna ‘pymnt_plan’ ya que solo tiene el 0.0019% de valores en yes frente al resto de no como se puede ver en <a href="#tbl-cam-var-2">Table&nbsp;5</a> por lo que no la consideraremos como muy aportante al modelo.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-cam-var-2" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;5: Eliminación variable pymnt_plan</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Valor</th>
<th style="text-align: right;">Cantidad de datos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">n</td>
<td style="text-align: right;">466276</td>
</tr>
<tr class="even">
<td style="text-align: left;">y</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Además, se eliminarán las variables ‘last_pymnt_d’, ‘last_credit_pull_d’, ‘earliest_cr_line’, ‘issue_d’, ‘addr_state’, ‘initial_list_status’ y ‘mths_since_last_delinq’, que contienen fechas y no se consideran suficiente aportantes para el modelo.</p>
<p>Para terminar se eliminarán también las columnas ‘application_type’, pues sólo existe un único valor que comparten todas las observaciones y ‘loan_status’, que es la variable de la que partimos para establecer nuestra variable objetivo.</p>
</section>
</section>
</section>
<section id="selección-de-variables-a-partir-de-woe-y-valor-de-información-iv" class="level2">
<h2 class="anchored" data-anchor-id="selección-de-variables-a-partir-de-woe-y-valor-de-información-iv">Selección de variables a partir de WoE y Valor de Información (IV)</h2>
<p>Como se puede ver en <a href="#tbl-cantidad-nulos-final">Table&nbsp;6</a> donde se encuentran las variables resultantes y la cantidad de nulos de cada uno debemos hacer una imputación, dicha imputación consistirá en reemplazar valores nulos por la moda, en el caso de las variables categóricas, y por la mediana en el caso de las continuas.</p>
<p>Dicha imputación se planteará en una función pero sólo se aplicará debidamente luego de dividir el conjunto de datos en datos de entrenamiento y datos de testeo.</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<div id="tbl-cantidad-nulos-final" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;6: Cantidad de nulos en variables resultatnes</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Cantidad de nulos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">loan_amnt</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">term</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">int_rate</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">grade</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">emp_length</td>
<td style="text-align: right;">21008</td>
</tr>
<tr class="even">
<td style="text-align: left;">home_ownership</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">annual_inc</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">verification_status</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purpose</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">dti</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">delinq_2yrs</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">inq_last_6mths</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">open_acc</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">pub_rec</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">revol_bal</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">revol_util</td>
<td style="text-align: right;">340</td>
</tr>
<tr class="odd">
<td style="text-align: left;">out_prncp</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">last_pymnt_amnt</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">collections_12_mths_ex_med</td>
<td style="text-align: right;">145</td>
</tr>
<tr class="even">
<td style="text-align: left;">acc_now_delinq</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tot_coll_amt</td>
<td style="text-align: right;">70276</td>
</tr>
<tr class="even">
<td style="text-align: left;">tot_cur_bal</td>
<td style="text-align: right;">70276</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Obligaciones_financieras</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A continuación aplicaremos la división de datos de 80% y 20% para entrenamiento y testeo respectivamente:</p>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="9">
<div id="tbl-x-train-inicial" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;7:  Vista inicial a datos de entrenamiento </caption>
  <thead>
    <tr>
      <th></th>
      <th>loan_amnt</th>
      <th>term</th>
      <th>int_rate</th>
      <th>grade</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>annual_inc</th>
      <th>...</th>
      <th>revol_util</th>
      <th>out_prncp</th>
      <th>last_pymnt_amnt</th>
      <th>collections_12_mths_ex_med</th>
      <th>acc_now_delinq</th>
      <th>tot_coll_amt</th>
      <th>tot_cur_bal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>456615</th>
      <td>15000</td>
      <td>36 months</td>
      <td>8.90</td>
      <td>A</td>
      <td>7.0</td>
      <td>MORTGAGE</td>
      <td>80000.0</td>
      <td>...</td>
      <td>59.0</td>
      <td>0.00</td>
      <td>8940.22</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>143586.0</td>
    </tr>
    <tr>
      <th>451541</th>
      <td>8000</td>
      <td>60 months</td>
      <td>18.25</td>
      <td>D</td>
      <td>10.0</td>
      <td>OWN</td>
      <td>44000.0</td>
      <td>...</td>
      <td>32.1</td>
      <td>5746.54</td>
      <td>204.24</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>180443.0</td>
    </tr>
    <tr>
      <th>394474</th>
      <td>12150</td>
      <td>60 months</td>
      <td>18.92</td>
      <td>D</td>
      <td>3.0</td>
      <td>OWN</td>
      <td>27000.0</td>
      <td>...</td>
      <td>73.2</td>
      <td>9282.24</td>
      <td>314.65</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>34197.0</td>
    </tr>
    <tr>
      <th>110294</th>
      <td>10000</td>
      <td>36 months</td>
      <td>6.03</td>
      <td>A</td>
      <td>3.0</td>
      <td>MORTGAGE</td>
      <td>33000.0</td>
      <td>...</td>
      <td>21.2</td>
      <td>0.00</td>
      <td>3553.37</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>77959.0</td>
    </tr>
    <tr>
      <th>139343</th>
      <td>15825</td>
      <td>36 months</td>
      <td>12.12</td>
      <td>B</td>
      <td>10.0</td>
      <td>MORTGAGE</td>
      <td>59000.0</td>
      <td>...</td>
      <td>93.6</td>
      <td>0.00</td>
      <td>526.53</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>187370.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>163633</th>
      <td>22800</td>
      <td>60 months</td>
      <td>16.29</td>
      <td>C</td>
      <td>10.0</td>
      <td>MORTGAGE</td>
      <td>85000.0</td>
      <td>...</td>
      <td>67.5</td>
      <td>12158.37</td>
      <td>557.98</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>29071.0</td>
    </tr>
    <tr>
      <th>399306</th>
      <td>20275</td>
      <td>36 months</td>
      <td>12.49</td>
      <td>B</td>
      <td>7.0</td>
      <td>MORTGAGE</td>
      <td>48000.0</td>
      <td>...</td>
      <td>75.0</td>
      <td>9947.82</td>
      <td>678.18</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>186530.0</td>
    </tr>
    <tr>
      <th>57787</th>
      <td>25000</td>
      <td>60 months</td>
      <td>14.30</td>
      <td>C</td>
      <td>NaN</td>
      <td>MORTGAGE</td>
      <td>65530.0</td>
      <td>...</td>
      <td>68.1</td>
      <td>0.00</td>
      <td>19162.85</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>290599.0</td>
    </tr>
    <tr>
      <th>81641</th>
      <td>10000</td>
      <td>36 months</td>
      <td>15.10</td>
      <td>C</td>
      <td>4.0</td>
      <td>MORTGAGE</td>
      <td>50000.0</td>
      <td>...</td>
      <td>65.1</td>
      <td>2936.24</td>
      <td>347.15</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>27715.0</td>
    </tr>
    <tr>
      <th>38736</th>
      <td>7500</td>
      <td>36 months</td>
      <td>10.08</td>
      <td>B</td>
      <td>7.0</td>
      <td>MORTGAGE</td>
      <td>50000.0</td>
      <td>...</td>
      <td>77.6</td>
      <td>0.00</td>
      <td>200.02</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>373028 rows × 22 columns</p>
</div>
</div>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<div id="tbl-x-test-inicial" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;8:  Vista inicial a datos de testeo </caption>
  <thead>
    <tr>
      <th></th>
      <th>loan_amnt</th>
      <th>term</th>
      <th>int_rate</th>
      <th>grade</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>annual_inc</th>
      <th>...</th>
      <th>revol_util</th>
      <th>out_prncp</th>
      <th>last_pymnt_amnt</th>
      <th>collections_12_mths_ex_med</th>
      <th>acc_now_delinq</th>
      <th>tot_coll_amt</th>
      <th>tot_cur_bal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>395346</th>
      <td>1800</td>
      <td>36 months</td>
      <td>14.64</td>
      <td>C</td>
      <td>10.0</td>
      <td>OWN</td>
      <td>50000.0</td>
      <td>...</td>
      <td>49.0</td>
      <td>0.00</td>
      <td>1159.57</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>965.0</td>
      <td>107437.0</td>
    </tr>
    <tr>
      <th>376583</th>
      <td>6000</td>
      <td>36 months</td>
      <td>7.12</td>
      <td>A</td>
      <td>1.0</td>
      <td>RENT</td>
      <td>63000.0</td>
      <td>...</td>
      <td>7.1</td>
      <td>2992.57</td>
      <td>185.60</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4413.0</td>
    </tr>
    <tr>
      <th>297790</th>
      <td>10700</td>
      <td>36 months</td>
      <td>14.99</td>
      <td>C</td>
      <td>0.0</td>
      <td>RENT</td>
      <td>82000.0</td>
      <td>...</td>
      <td>58.8</td>
      <td>0.00</td>
      <td>8835.32</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>68042.0</td>
    </tr>
    <tr>
      <th>47347</th>
      <td>15000</td>
      <td>36 months</td>
      <td>9.67</td>
      <td>B</td>
      <td>2.0</td>
      <td>RENT</td>
      <td>60000.0</td>
      <td>...</td>
      <td>26.1</td>
      <td>0.00</td>
      <td>10563.32</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>48874.0</td>
    </tr>
    <tr>
      <th>446772</th>
      <td>14000</td>
      <td>60 months</td>
      <td>18.25</td>
      <td>D</td>
      <td>10.0</td>
      <td>MORTGAGE</td>
      <td>86000.0</td>
      <td>...</td>
      <td>80.2</td>
      <td>0.00</td>
      <td>357.42</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>63601.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>32147</th>
      <td>2500</td>
      <td>36 months</td>
      <td>6.39</td>
      <td>A</td>
      <td>10.0</td>
      <td>OWN</td>
      <td>33600.0</td>
      <td>...</td>
      <td>7.8</td>
      <td>0.00</td>
      <td>79.89</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>78936</th>
      <td>10400</td>
      <td>36 months</td>
      <td>19.52</td>
      <td>D</td>
      <td>6.0</td>
      <td>RENT</td>
      <td>42000.0</td>
      <td>...</td>
      <td>76.6</td>
      <td>3190.81</td>
      <td>383.97</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>49987.0</td>
    </tr>
    <tr>
      <th>459582</th>
      <td>3000</td>
      <td>36 months</td>
      <td>23.40</td>
      <td>E</td>
      <td>8.0</td>
      <td>MORTGAGE</td>
      <td>30000.0</td>
      <td>...</td>
      <td>94.1</td>
      <td>1238.46</td>
      <td>116.76</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79912.0</td>
    </tr>
    <tr>
      <th>454915</th>
      <td>24000</td>
      <td>60 months</td>
      <td>15.61</td>
      <td>C</td>
      <td>5.0</td>
      <td>MORTGAGE</td>
      <td>80000.0</td>
      <td>...</td>
      <td>62.0</td>
      <td>16908.62</td>
      <td>578.68</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>215484.0</td>
    </tr>
    <tr>
      <th>223621</th>
      <td>23325</td>
      <td>36 months</td>
      <td>13.11</td>
      <td>B</td>
      <td>7.0</td>
      <td>RENT</td>
      <td>47000.0</td>
      <td>...</td>
      <td>71.0</td>
      <td>0.00</td>
      <td>807.62</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>93257 rows × 22 columns</p>
</div>
</div>
</div>
</div>
<p>Por lo que terminaremos con 373028 datos de entrenamiento y 93257 datos de testeo como se puede ver en <a href="#tbl-x-train-inicial">Table&nbsp;7</a> y <a href="#tbl-x-test-inicial">Table&nbsp;8</a>.</p>
<p>Así imputaremos cada conjunto y pasaremos a hacer selección de categorías con WoE y valor de información (IV) calculado donde seleccionaremos sólo aquellas que tengan valores por encima de 0.02 para este último.</p>
<section id="análisis-de-iv-para-variables-categóricas" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-iv-para-variables-categóricas">Análisis de IV para variables categóricas</h3>
<p>Comenzaremos analizando la variable home_ownership que como se puede notar en <a href="#tbl-iv-home_ownership">Table&nbsp;9</a> tiene un IV mayor de 0.02, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">
<div id="tbl-iv-home_ownership" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;9:  IV de home_ownership </caption>
  <thead>
    <tr>
      <th></th>
      <th>home_ownership</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>OTHER</td>
      <td>159</td>
      <td>0.792453</td>
      <td>0.000426</td>
      <td>126.0</td>
      <td>33.0</td>
      <td>0.000379</td>
      <td>0.000809</td>
      <td>-0.758081</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.02166</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NONE</td>
      <td>41</td>
      <td>0.853659</td>
      <td>0.000110</td>
      <td>35.0</td>
      <td>6.0</td>
      <td>0.000105</td>
      <td>0.000147</td>
      <td>-0.334267</td>
      <td>0.061206</td>
      <td>0.423814</td>
      <td>0.02166</td>
    </tr>
    <tr>
      <th>2</th>
      <td>RENT</td>
      <td>150776</td>
      <td>0.874052</td>
      <td>0.404195</td>
      <td>131786.0</td>
      <td>18990.0</td>
      <td>0.396642</td>
      <td>0.465738</td>
      <td>-0.160588</td>
      <td>0.020393</td>
      <td>0.173678</td>
      <td>0.02166</td>
    </tr>
    <tr>
      <th>3</th>
      <td>OWN</td>
      <td>33313</td>
      <td>0.890343</td>
      <td>0.089304</td>
      <td>29660.0</td>
      <td>3653.0</td>
      <td>0.089269</td>
      <td>0.089591</td>
      <td>-0.003605</td>
      <td>0.016292</td>
      <td>0.156984</td>
      <td>0.02166</td>
    </tr>
    <tr>
      <th>4</th>
      <td>MORTGAGE</td>
      <td>188739</td>
      <td>0.904143</td>
      <td>0.505965</td>
      <td>170647.0</td>
      <td>18092.0</td>
      <td>0.513604</td>
      <td>0.443714</td>
      <td>0.146272</td>
      <td>0.013800</td>
      <td>0.149877</td>
      <td>0.02166</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos analizando la variable verification_status que como se puede notar en <a href="#tbl-iv-verification_status">Table&nbsp;10</a> tiene un IV mayor de 0.02, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<div id="tbl-iv-verification_status" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;10:  IV de verification_status </caption>
  <thead>
    <tr>
      <th></th>
      <th>verification_status</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Verified</td>
      <td>134571</td>
      <td>0.872045</td>
      <td>0.360753</td>
      <td>117352.0</td>
      <td>17219.0</td>
      <td>0.353200</td>
      <td>0.422303</td>
      <td>-0.178691</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.022522</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Source Verified</td>
      <td>119969</td>
      <td>0.895723</td>
      <td>0.321609</td>
      <td>107459.0</td>
      <td>12510.0</td>
      <td>0.323424</td>
      <td>0.306813</td>
      <td>0.052726</td>
      <td>0.023678</td>
      <td>0.231417</td>
      <td>0.022522</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Not Verified</td>
      <td>118488</td>
      <td>0.906784</td>
      <td>0.317638</td>
      <td>107443.0</td>
      <td>11045.0</td>
      <td>0.323376</td>
      <td>0.270883</td>
      <td>0.177128</td>
      <td>0.011061</td>
      <td>0.124402</td>
      <td>0.022522</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Así analizando la variable purpose que como se puede notar en <a href="#tbl-iv-purpose">Table&nbsp;11</a> tiene un IV mayor de 0.02, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">
<div id="tbl-iv-purpose" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;11:  IV de purpose </caption>
  <thead>
    <tr>
      <th></th>
      <th>purpose</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>small_business</td>
      <td>5605</td>
      <td>0.787333</td>
      <td>0.015026</td>
      <td>4413.0</td>
      <td>1192.0</td>
      <td>0.013282</td>
      <td>0.029234</td>
      <td>-0.788933</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>1</th>
      <td>educational</td>
      <td>351</td>
      <td>0.792023</td>
      <td>0.000941</td>
      <td>278.0</td>
      <td>73.0</td>
      <td>0.000837</td>
      <td>0.001790</td>
      <td>-0.760693</td>
      <td>0.004690</td>
      <td>0.028240</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>2</th>
      <td>renewable_energy</td>
      <td>295</td>
      <td>0.837288</td>
      <td>0.000791</td>
      <td>247.0</td>
      <td>48.0</td>
      <td>0.000743</td>
      <td>0.001177</td>
      <td>-0.459668</td>
      <td>0.045265</td>
      <td>0.301026</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>3</th>
      <td>moving</td>
      <td>2397</td>
      <td>0.848561</td>
      <td>0.006426</td>
      <td>2034.0</td>
      <td>363.0</td>
      <td>0.006122</td>
      <td>0.008903</td>
      <td>-0.374498</td>
      <td>0.011273</td>
      <td>0.085169</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>4</th>
      <td>house</td>
      <td>1824</td>
      <td>0.861294</td>
      <td>0.004890</td>
      <td>1571.0</td>
      <td>253.0</td>
      <td>0.004728</td>
      <td>0.006205</td>
      <td>-0.271777</td>
      <td>0.012733</td>
      <td>0.102721</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>5</th>
      <td>other</td>
      <td>19006</td>
      <td>0.861675</td>
      <td>0.050951</td>
      <td>16377.0</td>
      <td>2629.0</td>
      <td>0.049291</td>
      <td>0.064477</td>
      <td>-0.268581</td>
      <td>0.000381</td>
      <td>0.003196</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>6</th>
      <td>medical</td>
      <td>3750</td>
      <td>0.863467</td>
      <td>0.010053</td>
      <td>3238.0</td>
      <td>512.0</td>
      <td>0.009746</td>
      <td>0.012557</td>
      <td>-0.253469</td>
      <td>0.001791</td>
      <td>0.015112</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>7</th>
      <td>vacation</td>
      <td>2003</td>
      <td>0.875686</td>
      <td>0.005370</td>
      <td>1754.0</td>
      <td>249.0</td>
      <td>0.005279</td>
      <td>0.006107</td>
      <td>-0.145654</td>
      <td>0.012220</td>
      <td>0.107815</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>8</th>
      <td>wedding</td>
      <td>1900</td>
      <td>0.881053</td>
      <td>0.005093</td>
      <td>1674.0</td>
      <td>226.0</td>
      <td>0.005038</td>
      <td>0.005543</td>
      <td>-0.095419</td>
      <td>0.005366</td>
      <td>0.050235</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>9</th>
      <td>debt_consolidation</td>
      <td>219196</td>
      <td>0.886704</td>
      <td>0.587613</td>
      <td>194362.0</td>
      <td>24834.0</td>
      <td>0.584980</td>
      <td>0.609065</td>
      <td>-0.040346</td>
      <td>0.005652</td>
      <td>0.055072</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>10</th>
      <td>home_improvement</td>
      <td>21253</td>
      <td>0.901614</td>
      <td>0.056974</td>
      <td>19162.0</td>
      <td>2091.0</td>
      <td>0.057673</td>
      <td>0.051283</td>
      <td>0.117432</td>
      <td>0.014910</td>
      <td>0.157778</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>11</th>
      <td>major_purchase</td>
      <td>7873</td>
      <td>0.905246</td>
      <td>0.021106</td>
      <td>7127.0</td>
      <td>746.0</td>
      <td>0.021450</td>
      <td>0.018296</td>
      <td>0.159065</td>
      <td>0.003632</td>
      <td>0.041633</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>12</th>
      <td>car</td>
      <td>4246</td>
      <td>0.911211</td>
      <td>0.011383</td>
      <td>3869.0</td>
      <td>377.0</td>
      <td>0.011645</td>
      <td>0.009246</td>
      <td>0.230651</td>
      <td>0.005965</td>
      <td>0.071586</td>
      <td>0.036668</td>
    </tr>
    <tr>
      <th>13</th>
      <td>credit_card</td>
      <td>83329</td>
      <td>0.913824</td>
      <td>0.223385</td>
      <td>76148.0</td>
      <td>7181.0</td>
      <td>0.229186</td>
      <td>0.176117</td>
      <td>0.263385</td>
      <td>0.002613</td>
      <td>0.032734</td>
      <td>0.036668</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Así analizando la variable grade que como se puede notar en <a href="#tbl-iv-grade">Table&nbsp;12</a> tiene un IV mayor de 0.02, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="15">
<div class="cell-output cell-output-display" data-execution_count="15">
<div id="tbl-iv-grade" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;12:  IV de grade </caption>
  <thead>
    <tr>
      <th></th>
      <th>grade</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>G</td>
      <td>2623</td>
      <td>0.721693</td>
      <td>0.007032</td>
      <td>1893.0</td>
      <td>730.0</td>
      <td>0.005697</td>
      <td>0.017904</td>
      <td>-1.144981</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>1</th>
      <td>F</td>
      <td>10606</td>
      <td>0.758061</td>
      <td>0.028432</td>
      <td>8040.0</td>
      <td>2566.0</td>
      <td>0.024198</td>
      <td>0.062932</td>
      <td>-0.955774</td>
      <td>0.036369</td>
      <td>0.189207</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>2</th>
      <td>E</td>
      <td>28590</td>
      <td>0.804477</td>
      <td>0.076643</td>
      <td>23000.0</td>
      <td>5590.0</td>
      <td>0.069224</td>
      <td>0.137097</td>
      <td>-0.683340</td>
      <td>0.046416</td>
      <td>0.272434</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>3</th>
      <td>D</td>
      <td>61713</td>
      <td>0.845527</td>
      <td>0.165438</td>
      <td>52180.0</td>
      <td>9533.0</td>
      <td>0.157049</td>
      <td>0.233801</td>
      <td>-0.397915</td>
      <td>0.041050</td>
      <td>0.285425</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>4</th>
      <td>C</td>
      <td>100342</td>
      <td>0.885870</td>
      <td>0.268993</td>
      <td>88890.0</td>
      <td>11452.0</td>
      <td>0.267536</td>
      <td>0.280865</td>
      <td>-0.048620</td>
      <td>0.040343</td>
      <td>0.349295</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>109344</td>
      <td>0.921422</td>
      <td>0.293125</td>
      <td>100752.0</td>
      <td>8592.0</td>
      <td>0.303238</td>
      <td>0.210723</td>
      <td>0.363975</td>
      <td>0.035552</td>
      <td>0.412595</td>
      <td>0.292145</td>
    </tr>
    <tr>
      <th>6</th>
      <td>A</td>
      <td>59810</td>
      <td>0.961361</td>
      <td>0.160336</td>
      <td>57499.0</td>
      <td>2311.0</td>
      <td>0.173057</td>
      <td>0.056678</td>
      <td>1.116232</td>
      <td>0.039939</td>
      <td>0.752257</td>
      <td>0.292145</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Así analizando la variable term que como se puede notar en <a href="#tbl-iv-term">Table&nbsp;13</a> tiene un IV mayor de 0.02, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="16">
<div class="cell-output cell-output-display" data-execution_count="16">
<div id="tbl-iv-term" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;13:  IV de term </caption>
  <thead>
    <tr>
      <th></th>
      <th>term</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>60 months</td>
      <td>102829</td>
      <td>0.857735</td>
      <td>0.27566</td>
      <td>88200.0</td>
      <td>14629.0</td>
      <td>0.26546</td>
      <td>0.358783</td>
      <td>-0.301254</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.040794</td>
    </tr>
    <tr>
      <th>1</th>
      <td>36 months</td>
      <td>270199</td>
      <td>0.903238</td>
      <td>0.72434</td>
      <td>244054.0</td>
      <td>26145.0</td>
      <td>0.73454</td>
      <td>0.641217</td>
      <td>0.135876</td>
      <td>0.045503</td>
      <td>0.43713</td>
      <td>0.040794</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Por lo que concluimos seleccionando todas las variables categóricas como se puede ver en el resumen de <a href="#tbl-iv-cat-res">Table&nbsp;14</a>.</p>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display" data-execution_count="17">
<div id="tbl-iv-cat-res" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;14: IV de variables categóricas</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">IV</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">home_ownership</td>
<td style="text-align: right;">0.0216601</td>
</tr>
<tr class="even">
<td style="text-align: left;">verification_status</td>
<td style="text-align: right;">0.0225219</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purpose</td>
<td style="text-align: right;">0.0366678</td>
</tr>
<tr class="even">
<td style="text-align: left;">grade</td>
<td style="text-align: right;">0.292145</td>
</tr>
<tr class="odd">
<td style="text-align: left;">term</td>
<td style="text-align: right;">0.0407943</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="análisis-de-iv-para-numéricas" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-iv-para-numéricas">Análisis de IV para numéricas</h3>
<p>Para comenzar se hará un análisis rápido del IV de cada variable teniendo en cuenta todas las observaciones del X_train, dividiendo variables continuas en 20 intervalos y no continuas en cantidad de valores únicos:</p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\marlo\AppData\Local\Programs\Python\Python310\lib\site-packages\pandas\core\arraylike.py:364: RuntimeWarning:

divide by zero encountered in log
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div id="tbl-iv-res-cont" class="anchored">
<table class="table table-sm table-striped">
<caption>Table&nbsp;15: Resumen de IV para variables continuas</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">IV</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">loan_amnt</td>
<td style="text-align: right;">0.00568593</td>
</tr>
<tr class="even">
<td style="text-align: left;">int_rate</td>
<td style="text-align: right;">0.334257</td>
</tr>
<tr class="odd">
<td style="text-align: left;">emp_length</td>
<td style="text-align: right;">0.0046393</td>
</tr>
<tr class="even">
<td style="text-align: left;">annual_inc</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dti</td>
<td style="text-align: right;">0.0266219</td>
</tr>
<tr class="even">
<td style="text-align: left;">delinq_2yrs</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">inq_last_6mths</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="even">
<td style="text-align: left;">open_acc</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pub_rec</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="even">
<td style="text-align: left;">revol_bal</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">revol_util</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="even">
<td style="text-align: left;">out_prncp</td>
<td style="text-align: right;">0.645187</td>
</tr>
<tr class="odd">
<td style="text-align: left;">last_pymnt_amnt</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="even">
<td style="text-align: left;">collections_12_mths_ex_med</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">acc_now_delinq</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="even">
<td style="text-align: left;">tot_coll_amt</td>
<td style="text-align: right;">inf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tot_cur_bal</td>
<td style="text-align: right;">inf</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Como se puede observar en <a href="#tbl-iv-res-cont">Table&nbsp;15</a> hay algunas variables cuyo valor de información es inf, esto se debe a la cantidad de observaciones positivas o negativas en algunos de los intervalos. Para controlar esto haremos el análisis de aquellas variables cuidando de posibles outliers que dificulten dicha división en intervalos</p>
<p>Así comenzaremos analizando la variable annual_inc que como se puede notar en <a href="#tbl-iv-annual_inc">Table&nbsp;16</a> tiene un IV mayor de 0.02 considerando valores menores o iguales a 150000, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="19">
<div class="cell-output cell-output-display" data-execution_count="19">
<div id="tbl-iv-annual_inc" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;16:  IV de annual_inc </caption>
  <thead>
    <tr>
      <th></th>
      <th>annual_inc_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(1747.896, 9301.2]</td>
      <td>186</td>
      <td>0.865591</td>
      <td>0.000522</td>
      <td>161.0</td>
      <td>25.0</td>
      <td>0.000508</td>
      <td>0.000632</td>
      <td>-0.218697</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(9301.2, 16706.4]</td>
      <td>2305</td>
      <td>0.838612</td>
      <td>0.006466</td>
      <td>1933.0</td>
      <td>372.0</td>
      <td>0.006099</td>
      <td>0.009406</td>
      <td>-0.433291</td>
      <td>0.026980</td>
      <td>0.214594</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(16706.4, 24111.6]</td>
      <td>8357</td>
      <td>0.849707</td>
      <td>0.023442</td>
      <td>7101.0</td>
      <td>1256.0</td>
      <td>0.022404</td>
      <td>0.031759</td>
      <td>-0.348922</td>
      <td>0.011095</td>
      <td>0.084369</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(24111.6, 31516.8]</td>
      <td>19675</td>
      <td>0.856163</td>
      <td>0.055190</td>
      <td>16845.0</td>
      <td>2830.0</td>
      <td>0.053147</td>
      <td>0.071559</td>
      <td>-0.297449</td>
      <td>0.006456</td>
      <td>0.051474</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(31516.8, 38922.0]</td>
      <td>27830</td>
      <td>0.862379</td>
      <td>0.078065</td>
      <td>24000.0</td>
      <td>3830.0</td>
      <td>0.075722</td>
      <td>0.096844</td>
      <td>-0.246037</td>
      <td>0.006216</td>
      <td>0.051412</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(38922.0, 46327.2]</td>
      <td>42414</td>
      <td>0.870161</td>
      <td>0.118974</td>
      <td>36907.0</td>
      <td>5507.0</td>
      <td>0.116445</td>
      <td>0.139249</td>
      <td>-0.178845</td>
      <td>0.007782</td>
      <td>0.067192</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(46327.2, 53732.4]</td>
      <td>38176</td>
      <td>0.882308</td>
      <td>0.107086</td>
      <td>33683.0</td>
      <td>4493.0</td>
      <td>0.106273</td>
      <td>0.113609</td>
      <td>-0.066753</td>
      <td>0.012147</td>
      <td>0.112091</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(53732.4, 61137.6]</td>
      <td>42290</td>
      <td>0.880870</td>
      <td>0.118627</td>
      <td>37252.0</td>
      <td>5038.0</td>
      <td>0.117533</td>
      <td>0.127390</td>
      <td>-0.080529</td>
      <td>0.001438</td>
      <td>0.013776</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(61137.6, 68542.8]</td>
      <td>29401</td>
      <td>0.894289</td>
      <td>0.082472</td>
      <td>26293.0</td>
      <td>3108.0</td>
      <td>0.082957</td>
      <td>0.078588</td>
      <td>0.054098</td>
      <td>0.013419</td>
      <td>0.134627</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(68542.8, 75948.0]</td>
      <td>32586</td>
      <td>0.895753</td>
      <td>0.091406</td>
      <td>29189.0</td>
      <td>3397.0</td>
      <td>0.092094</td>
      <td>0.085896</td>
      <td>0.069673</td>
      <td>0.001463</td>
      <td>0.015576</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(75948.0, 83353.2]</td>
      <td>22493</td>
      <td>0.905393</td>
      <td>0.063095</td>
      <td>20365.0</td>
      <td>2128.0</td>
      <td>0.064253</td>
      <td>0.053808</td>
      <td>0.177409</td>
      <td>0.009640</td>
      <td>0.107736</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(83353.2, 90758.4]</td>
      <td>22605</td>
      <td>0.909754</td>
      <td>0.063409</td>
      <td>20565.0</td>
      <td>2040.0</td>
      <td>0.064884</td>
      <td>0.051583</td>
      <td>0.229415</td>
      <td>0.004362</td>
      <td>0.052006</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(90758.4, 98163.6]</td>
      <td>14267</td>
      <td>0.913997</td>
      <td>0.040020</td>
      <td>13040.0</td>
      <td>1227.0</td>
      <td>0.041142</td>
      <td>0.031026</td>
      <td>0.282224</td>
      <td>0.004243</td>
      <td>0.052809</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(98163.6, 105568.8]</td>
      <td>15109</td>
      <td>0.916077</td>
      <td>0.042382</td>
      <td>13841.0</td>
      <td>1268.0</td>
      <td>0.043669</td>
      <td>0.032062</td>
      <td>0.308969</td>
      <td>0.002079</td>
      <td>0.026745</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(105568.8, 112974.0]</td>
      <td>9058</td>
      <td>0.918525</td>
      <td>0.025408</td>
      <td>8320.0</td>
      <td>738.0</td>
      <td>0.026250</td>
      <td>0.018661</td>
      <td>0.341248</td>
      <td>0.002449</td>
      <td>0.032279</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(112974.0, 120379.2]</td>
      <td>10450</td>
      <td>0.918660</td>
      <td>0.029313</td>
      <td>9600.0</td>
      <td>850.0</td>
      <td>0.030289</td>
      <td>0.021493</td>
      <td>0.343056</td>
      <td>0.000135</td>
      <td>0.001808</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(120379.2, 127784.4]</td>
      <td>5011</td>
      <td>0.927360</td>
      <td>0.014056</td>
      <td>4647.0</td>
      <td>364.0</td>
      <td>0.014662</td>
      <td>0.009204</td>
      <td>0.465598</td>
      <td>0.008700</td>
      <td>0.122541</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(127784.4, 135189.6]</td>
      <td>5631</td>
      <td>0.931806</td>
      <td>0.015795</td>
      <td>5247.0</td>
      <td>384.0</td>
      <td>0.016555</td>
      <td>0.009710</td>
      <td>0.533543</td>
      <td>0.004446</td>
      <td>0.067946</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(135189.6, 142594.8]</td>
      <td>3437</td>
      <td>0.918534</td>
      <td>0.009641</td>
      <td>3157.0</td>
      <td>280.0</td>
      <td>0.009961</td>
      <td>0.007080</td>
      <td>0.341362</td>
      <td>0.013272</td>
      <td>0.192181</td>
      <td>0.047311</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(142594.8, 150000.0]</td>
      <td>5216</td>
      <td>0.920821</td>
      <td>0.014631</td>
      <td>4803.0</td>
      <td>413.0</td>
      <td>0.015154</td>
      <td>0.010443</td>
      <td>0.372323</td>
      <td>0.002287</td>
      <td>0.030961</td>
      <td>0.047311</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable delinq_2yrs que como se puede notar en <a href="#tbl-iv-delinq_2yrs">Table&nbsp;17</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 10, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="20">
<div class="cell-output cell-output-display" data-execution_count="20">
<div id="tbl-iv-delinq_2yrs" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;17:  IV de delinq_2yrs </caption>
  <thead>
    <tr>
      <th></th>
      <th>delinq_2yrs</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>306406</td>
      <td>0.890759</td>
      <td>0.821691</td>
      <td>272934.0</td>
      <td>33472.0</td>
      <td>0.821739</td>
      <td>0.821298</td>
      <td>0.000537</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>44972</td>
      <td>0.891888</td>
      <td>0.120602</td>
      <td>40110.0</td>
      <td>4862.0</td>
      <td>0.120762</td>
      <td>0.119298</td>
      <td>0.012192</td>
      <td>0.001129</td>
      <td>0.011655</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>13056</td>
      <td>0.887178</td>
      <td>0.035012</td>
      <td>11583.0</td>
      <td>1473.0</td>
      <td>0.034874</td>
      <td>0.036143</td>
      <td>-0.035747</td>
      <td>0.004710</td>
      <td>0.047938</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0</td>
      <td>4510</td>
      <td>0.882262</td>
      <td>0.012094</td>
      <td>3979.0</td>
      <td>531.0</td>
      <td>0.011980</td>
      <td>0.013029</td>
      <td>-0.083960</td>
      <td>0.004917</td>
      <td>0.048214</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.0</td>
      <td>1895</td>
      <td>0.900792</td>
      <td>0.005082</td>
      <td>1707.0</td>
      <td>188.0</td>
      <td>0.005139</td>
      <td>0.004613</td>
      <td>0.108067</td>
      <td>0.018530</td>
      <td>0.192027</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5.0</td>
      <td>990</td>
      <td>0.887879</td>
      <td>0.002655</td>
      <td>879.0</td>
      <td>111.0</td>
      <td>0.002646</td>
      <td>0.002724</td>
      <td>-0.028729</td>
      <td>0.012913</td>
      <td>0.136796</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6.0</td>
      <td>502</td>
      <td>0.894422</td>
      <td>0.001346</td>
      <td>449.0</td>
      <td>53.0</td>
      <td>0.001352</td>
      <td>0.001300</td>
      <td>0.038747</td>
      <td>0.006544</td>
      <td>0.067476</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7.0</td>
      <td>285</td>
      <td>0.877193</td>
      <td>0.000764</td>
      <td>250.0</td>
      <td>35.0</td>
      <td>0.000753</td>
      <td>0.000859</td>
      <td>-0.131871</td>
      <td>0.017229</td>
      <td>0.170618</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8.0</td>
      <td>145</td>
      <td>0.917241</td>
      <td>0.000389</td>
      <td>133.0</td>
      <td>12.0</td>
      <td>0.000400</td>
      <td>0.000294</td>
      <td>0.307458</td>
      <td>0.040048</td>
      <td>0.439330</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9.0</td>
      <td>83</td>
      <td>0.867470</td>
      <td>0.000223</td>
      <td>72.0</td>
      <td>11.0</td>
      <td>0.000217</td>
      <td>0.000270</td>
      <td>-0.219213</td>
      <td>0.049771</td>
      <td>0.526672</td>
      <td>0.000278</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10.0</td>
      <td>53</td>
      <td>0.867925</td>
      <td>0.000142</td>
      <td>46.0</td>
      <td>7.0</td>
      <td>0.000138</td>
      <td>0.000172</td>
      <td>-0.215253</td>
      <td>0.000455</td>
      <td>0.003960</td>
      <td>0.000278</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable inq_last_6mths que como se puede notar en <a href="#tbl-iv-inq_last_6mths">Table&nbsp;18</a> tiene un IV mayor a 0.02 considerando valores menores o iguales a 5, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="21">
<div class="cell-output cell-output-display" data-execution_count="21">
<div id="tbl-iv-inq_last_6mths" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;18:  IV de inq_last_6mths </caption>
  <thead>
    <tr>
      <th></th>
      <th>inq_last_6mths</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>193162</td>
      <td>0.908574</td>
      <td>0.518023</td>
      <td>175502.0</td>
      <td>17660.0</td>
      <td>0.528374</td>
      <td>0.433608</td>
      <td>0.197662</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>104049</td>
      <td>0.884814</td>
      <td>0.279039</td>
      <td>92064.0</td>
      <td>11985.0</td>
      <td>0.277172</td>
      <td>0.294269</td>
      <td>-0.059858</td>
      <td>0.023760</td>
      <td>0.257520</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>46361</td>
      <td>0.863679</td>
      <td>0.124331</td>
      <td>40041.0</td>
      <td>6320.0</td>
      <td>0.120549</td>
      <td>0.155176</td>
      <td>-0.252501</td>
      <td>0.021135</td>
      <td>0.192643</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0</td>
      <td>20110</td>
      <td>0.841174</td>
      <td>0.053931</td>
      <td>16916.0</td>
      <td>3194.0</td>
      <td>0.050928</td>
      <td>0.078423</td>
      <td>-0.431700</td>
      <td>0.022505</td>
      <td>0.179199</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.0</td>
      <td>5772</td>
      <td>0.845807</td>
      <td>0.015479</td>
      <td>4882.0</td>
      <td>890.0</td>
      <td>0.014698</td>
      <td>0.021852</td>
      <td>-0.396597</td>
      <td>0.004634</td>
      <td>0.035103</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5.0</td>
      <td>2218</td>
      <td>0.825068</td>
      <td>0.005948</td>
      <td>1830.0</td>
      <td>388.0</td>
      <td>0.005509</td>
      <td>0.009527</td>
      <td>-0.547620</td>
      <td>0.020740</td>
      <td>0.151023</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6.0</td>
      <td>960</td>
      <td>0.792708</td>
      <td>0.002575</td>
      <td>761.0</td>
      <td>199.0</td>
      <td>0.002291</td>
      <td>0.004886</td>
      <td>-0.757357</td>
      <td>0.032359</td>
      <td>0.209737</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7.0</td>
      <td>153</td>
      <td>0.633987</td>
      <td>0.000410</td>
      <td>97.0</td>
      <td>56.0</td>
      <td>0.000292</td>
      <td>0.001375</td>
      <td>-1.549327</td>
      <td>0.158721</td>
      <td>0.791969</td>
      <td>0.050132</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8.0</td>
      <td>98</td>
      <td>0.632653</td>
      <td>0.000263</td>
      <td>62.0</td>
      <td>36.0</td>
      <td>0.000187</td>
      <td>0.000884</td>
      <td>-1.555070</td>
      <td>0.001334</td>
      <td>0.005744</td>
      <td>0.050132</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable open_acc que como se puede notar en <a href="#tbl-iv-open_acc">Table&nbsp;19</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 28, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="22">
<div class="cell-output cell-output-display" data-execution_count="22">
<div id="tbl-iv-open_acc" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;19:  IV de open_acc </caption>
  <thead>
    <tr>
      <th></th>
      <th>open_acc_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-0.028, 1.4]</td>
      <td>114</td>
      <td>0.859649</td>
      <td>0.000308</td>
      <td>98.0</td>
      <td>16.0</td>
      <td>0.000297</td>
      <td>0.000395</td>
      <td>-0.285080</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(1.4, 2.8]</td>
      <td>1447</td>
      <td>0.847270</td>
      <td>0.003904</td>
      <td>1226.0</td>
      <td>221.0</td>
      <td>0.003714</td>
      <td>0.005453</td>
      <td>-0.384109</td>
      <td>0.012379</td>
      <td>0.099029</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(2.8, 4.2]</td>
      <td>14463</td>
      <td>0.885363</td>
      <td>0.039018</td>
      <td>12805.0</td>
      <td>1658.0</td>
      <td>0.038786</td>
      <td>0.040907</td>
      <td>-0.053235</td>
      <td>0.038092</td>
      <td>0.330874</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(4.2, 5.6]</td>
      <td>17224</td>
      <td>0.891547</td>
      <td>0.046467</td>
      <td>15356.0</td>
      <td>1868.0</td>
      <td>0.046513</td>
      <td>0.046088</td>
      <td>0.009179</td>
      <td>0.006184</td>
      <td>0.062414</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(5.6, 7.0]</td>
      <td>54564</td>
      <td>0.891064</td>
      <td>0.147202</td>
      <td>48620.0</td>
      <td>5944.0</td>
      <td>0.147270</td>
      <td>0.146653</td>
      <td>0.004194</td>
      <td>0.000483</td>
      <td>0.004985</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(7.0, 8.4]</td>
      <td>33510</td>
      <td>0.891435</td>
      <td>0.090403</td>
      <td>29872.0</td>
      <td>3638.0</td>
      <td>0.090482</td>
      <td>0.089758</td>
      <td>0.008029</td>
      <td>0.000372</td>
      <td>0.003835</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(8.4, 9.8]</td>
      <td>35148</td>
      <td>0.889041</td>
      <td>0.094822</td>
      <td>31248.0</td>
      <td>3900.0</td>
      <td>0.094650</td>
      <td>0.096223</td>
      <td>-0.016480</td>
      <td>0.002395</td>
      <td>0.024509</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(9.8, 11.2]</td>
      <td>65367</td>
      <td>0.888292</td>
      <td>0.176346</td>
      <td>58065.0</td>
      <td>7302.0</td>
      <td>0.175878</td>
      <td>0.180158</td>
      <td>-0.024044</td>
      <td>0.000748</td>
      <td>0.007564</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(11.2, 12.6]</td>
      <td>27716</td>
      <td>0.889306</td>
      <td>0.074772</td>
      <td>24648.0</td>
      <td>3068.0</td>
      <td>0.074659</td>
      <td>0.075695</td>
      <td>-0.013789</td>
      <td>0.001014</td>
      <td>0.010255</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(12.6, 14.0]</td>
      <td>43658</td>
      <td>0.892299</td>
      <td>0.117780</td>
      <td>38956.0</td>
      <td>4702.0</td>
      <td>0.117997</td>
      <td>0.116010</td>
      <td>0.016986</td>
      <td>0.002993</td>
      <td>0.030775</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(14.0, 15.4]</td>
      <td>16257</td>
      <td>0.891554</td>
      <td>0.043858</td>
      <td>14494.0</td>
      <td>1763.0</td>
      <td>0.043902</td>
      <td>0.043498</td>
      <td>0.009259</td>
      <td>0.000745</td>
      <td>0.007727</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(15.4, 16.8]</td>
      <td>13466</td>
      <td>0.894326</td>
      <td>0.036328</td>
      <td>12043.0</td>
      <td>1423.0</td>
      <td>0.036478</td>
      <td>0.035109</td>
      <td>0.038257</td>
      <td>0.002772</td>
      <td>0.028998</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(16.8, 18.2]</td>
      <td>19396</td>
      <td>0.893689</td>
      <td>0.052326</td>
      <td>17334.0</td>
      <td>2062.0</td>
      <td>0.052505</td>
      <td>0.050875</td>
      <td>0.031535</td>
      <td>0.000637</td>
      <td>0.006723</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(18.2, 19.6]</td>
      <td>6929</td>
      <td>0.889739</td>
      <td>0.018693</td>
      <td>6165.0</td>
      <td>764.0</td>
      <td>0.018674</td>
      <td>0.018850</td>
      <td>-0.009383</td>
      <td>0.003951</td>
      <td>0.040918</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(19.6, 21.0]</td>
      <td>9586</td>
      <td>0.896203</td>
      <td>0.025861</td>
      <td>8591.0</td>
      <td>995.0</td>
      <td>0.026022</td>
      <td>0.024549</td>
      <td>0.058269</td>
      <td>0.006464</td>
      <td>0.067652</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(21.0, 22.4]</td>
      <td>3266</td>
      <td>0.894672</td>
      <td>0.008811</td>
      <td>2922.0</td>
      <td>344.0</td>
      <td>0.008851</td>
      <td>0.008487</td>
      <td>0.041923</td>
      <td>0.001530</td>
      <td>0.016346</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(22.4, 23.8]</td>
      <td>2548</td>
      <td>0.903846</td>
      <td>0.006874</td>
      <td>2303.0</td>
      <td>245.0</td>
      <td>0.006976</td>
      <td>0.006045</td>
      <td>0.143251</td>
      <td>0.009174</td>
      <td>0.101328</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(23.8, 25.2]</td>
      <td>3497</td>
      <td>0.893909</td>
      <td>0.009434</td>
      <td>3126.0</td>
      <td>371.0</td>
      <td>0.009469</td>
      <td>0.009153</td>
      <td>0.033849</td>
      <td>0.009937</td>
      <td>0.109402</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(25.2, 26.6]</td>
      <td>1063</td>
      <td>0.899341</td>
      <td>0.002868</td>
      <td>956.0</td>
      <td>107.0</td>
      <td>0.002896</td>
      <td>0.002640</td>
      <td>0.092470</td>
      <td>0.005432</td>
      <td>0.058622</td>
      <td>0.001451</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(26.6, 28.0]</td>
      <td>1455</td>
      <td>0.903780</td>
      <td>0.003925</td>
      <td>1315.0</td>
      <td>140.0</td>
      <td>0.003983</td>
      <td>0.003454</td>
      <td>0.142491</td>
      <td>0.004439</td>
      <td>0.050020</td>
      <td>0.001451</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable pub_rec que como se puede notar en <a href="#tbl-iv-pub_rec">Table&nbsp;20</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 0.9, por lo que no la mantendremos para el ajuste del modelo pues además, como se puede notar en la misma tabla, es complicado realizar una división en intervalos suficiente para que dicha variable entregue un IV aceptable.</p>
<div class="cell" data-execution_count="23">
<div class="cell-output cell-output-display" data-execution_count="23">
<div id="tbl-iv-pub_rec" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;20:  IV de pub_rec </caption>
  <thead>
    <tr>
      <th></th>
      <th>pub_rec_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-0.001, -0.0009]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(-0.0009, -0.0008]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(-0.0008, -0.0007]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(-0.0007, -0.0006]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(-0.0006, -0.0005]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(-0.0005, -0.0004]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(-0.0004, -0.0003]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(-0.0003, -0.0002]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(-0.0002, -0.0001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(-0.0001, 0.0]</td>
      <td>323891</td>
      <td>0.889679</td>
      <td>1.0</td>
      <td>288159.0</td>
      <td>35732.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(0.0, 0.0001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(0.0001, 0.0002]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(0.0002, 0.0003]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(0.0003, 0.0004]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(0.0004, 0.0005]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(0.0005, 0.0006]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(0.0006, 0.0007]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(0.0007, 0.0008]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(0.0008, 0.0009]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(0.0009, 0.001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable revol_bal que como se puede notar en <a href="#tbl-iv-revol_bal">Table&nbsp;21</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 60000, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="24">
<div class="cell-output cell-output-display" data-execution_count="24">
<div id="tbl-iv-revol_bal" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;21:  IV de revol_bal </caption>
  <thead>
    <tr>
      <th></th>
      <th>revol_bal_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-59.995, 2999.75]</td>
      <td>31397</td>
      <td>0.884734</td>
      <td>0.085842</td>
      <td>27778.0</td>
      <td>3619.0</td>
      <td>0.085320</td>
      <td>0.090072</td>
      <td>-0.054196</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(2999.75, 5999.5]</td>
      <td>53881</td>
      <td>0.889571</td>
      <td>0.147316</td>
      <td>47931.0</td>
      <td>5950.0</td>
      <td>0.147220</td>
      <td>0.148087</td>
      <td>-0.005871</td>
      <td>0.004837</td>
      <td>0.048325</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(5999.5, 8999.25]</td>
      <td>56134</td>
      <td>0.885987</td>
      <td>0.153476</td>
      <td>49734.0</td>
      <td>6400.0</td>
      <td>0.152758</td>
      <td>0.159287</td>
      <td>-0.041851</td>
      <td>0.003584</td>
      <td>0.035980</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(8999.25, 11999.0]</td>
      <td>48572</td>
      <td>0.884954</td>
      <td>0.132800</td>
      <td>42984.0</td>
      <td>5588.0</td>
      <td>0.132026</td>
      <td>0.139078</td>
      <td>-0.052036</td>
      <td>0.001033</td>
      <td>0.010184</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(11999.0, 14998.75]</td>
      <td>39477</td>
      <td>0.887453</td>
      <td>0.107934</td>
      <td>35034.0</td>
      <td>4443.0</td>
      <td>0.107607</td>
      <td>0.110580</td>
      <td>-0.027253</td>
      <td>0.002499</td>
      <td>0.024783</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(14998.75, 17998.5]</td>
      <td>31073</td>
      <td>0.887265</td>
      <td>0.084956</td>
      <td>27570.0</td>
      <td>3503.0</td>
      <td>0.084681</td>
      <td>0.087185</td>
      <td>-0.029134</td>
      <td>0.000188</td>
      <td>0.001881</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(17998.5, 20998.25]</td>
      <td>23993</td>
      <td>0.888718</td>
      <td>0.065599</td>
      <td>21323.0</td>
      <td>2670.0</td>
      <td>0.065494</td>
      <td>0.066453</td>
      <td>-0.014534</td>
      <td>0.001452</td>
      <td>0.014599</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(20998.25, 23998.0]</td>
      <td>18511</td>
      <td>0.894225</td>
      <td>0.050611</td>
      <td>16553.0</td>
      <td>1958.0</td>
      <td>0.050843</td>
      <td>0.048732</td>
      <td>0.042402</td>
      <td>0.005508</td>
      <td>0.056936</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(23998.0, 26997.75]</td>
      <td>14652</td>
      <td>0.900969</td>
      <td>0.040060</td>
      <td>13201.0</td>
      <td>1451.0</td>
      <td>0.040547</td>
      <td>0.036113</td>
      <td>0.115797</td>
      <td>0.006744</td>
      <td>0.073396</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(26997.75, 29997.5]</td>
      <td>11763</td>
      <td>0.898325</td>
      <td>0.032161</td>
      <td>10567.0</td>
      <td>1196.0</td>
      <td>0.032457</td>
      <td>0.029767</td>
      <td>0.086511</td>
      <td>0.002644</td>
      <td>0.029286</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(29997.5, 32997.25]</td>
      <td>9173</td>
      <td>0.903957</td>
      <td>0.025080</td>
      <td>8292.0</td>
      <td>881.0</td>
      <td>0.025469</td>
      <td>0.021927</td>
      <td>0.149747</td>
      <td>0.005632</td>
      <td>0.063236</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(32997.25, 35997.0]</td>
      <td>7162</td>
      <td>0.899749</td>
      <td>0.019582</td>
      <td>6444.0</td>
      <td>718.0</td>
      <td>0.019793</td>
      <td>0.017870</td>
      <td>0.102193</td>
      <td>0.004209</td>
      <td>0.047554</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(35997.0, 38996.75]</td>
      <td>5660</td>
      <td>0.912544</td>
      <td>0.015475</td>
      <td>5165.0</td>
      <td>495.0</td>
      <td>0.015864</td>
      <td>0.012320</td>
      <td>0.252860</td>
      <td>0.012795</td>
      <td>0.150667</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(38996.75, 41996.5]</td>
      <td>4080</td>
      <td>0.903676</td>
      <td>0.011155</td>
      <td>3687.0</td>
      <td>393.0</td>
      <td>0.011325</td>
      <td>0.009781</td>
      <td>0.146517</td>
      <td>0.008868</td>
      <td>0.106344</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(41996.5, 44996.25]</td>
      <td>3021</td>
      <td>0.917577</td>
      <td>0.008260</td>
      <td>2772.0</td>
      <td>249.0</td>
      <td>0.008514</td>
      <td>0.006197</td>
      <td>0.317629</td>
      <td>0.013900</td>
      <td>0.171113</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(44996.25, 47996.0]</td>
      <td>2398</td>
      <td>0.916180</td>
      <td>0.006556</td>
      <td>2197.0</td>
      <td>201.0</td>
      <td>0.006748</td>
      <td>0.005003</td>
      <td>0.299301</td>
      <td>0.001397</td>
      <td>0.018328</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(47996.0, 50995.75]</td>
      <td>1797</td>
      <td>0.902615</td>
      <td>0.004913</td>
      <td>1622.0</td>
      <td>175.0</td>
      <td>0.004982</td>
      <td>0.004356</td>
      <td>0.134387</td>
      <td>0.013565</td>
      <td>0.164914</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(50995.75, 53995.5]</td>
      <td>1244</td>
      <td>0.893087</td>
      <td>0.003401</td>
      <td>1111.0</td>
      <td>133.0</td>
      <td>0.003412</td>
      <td>0.003310</td>
      <td>0.030424</td>
      <td>0.009529</td>
      <td>0.103963</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(53995.5, 56995.25]</td>
      <td>988</td>
      <td>0.906883</td>
      <td>0.002701</td>
      <td>896.0</td>
      <td>92.0</td>
      <td>0.002752</td>
      <td>0.002290</td>
      <td>0.183910</td>
      <td>0.013796</td>
      <td>0.153485</td>
      <td>0.005375</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(56995.25, 59995.0]</td>
      <td>776</td>
      <td>0.917526</td>
      <td>0.002122</td>
      <td>712.0</td>
      <td>64.0</td>
      <td>0.002187</td>
      <td>0.001593</td>
      <td>0.316953</td>
      <td>0.010643</td>
      <td>0.133043</td>
      <td>0.005375</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable revol_util que como se puede notar en <a href="#tbl-iv-revol_util">Table&nbsp;22</a> tiene un IV mayor a 0.02 considerando valores menores o iguales a 105, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="25">
<div class="cell-output cell-output-display" data-execution_count="25">
<div id="tbl-iv-revol_util" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;22:  IV de revol_util </caption>
  <thead>
    <tr>
      <th></th>
      <th>revol_util_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-0.105, 5.25]</td>
      <td>7007</td>
      <td>0.903097</td>
      <td>0.018806</td>
      <td>6328.0</td>
      <td>679.0</td>
      <td>0.019067</td>
      <td>0.016678</td>
      <td>0.133838</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(5.25, 10.5]</td>
      <td>6441</td>
      <td>0.925943</td>
      <td>0.017287</td>
      <td>5964.0</td>
      <td>477.0</td>
      <td>0.017970</td>
      <td>0.011716</td>
      <td>0.427699</td>
      <td>0.022846</td>
      <td>0.293862</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(10.5, 15.75]</td>
      <td>8008</td>
      <td>0.919705</td>
      <td>0.021492</td>
      <td>7365.0</td>
      <td>643.0</td>
      <td>0.022191</td>
      <td>0.015794</td>
      <td>0.340069</td>
      <td>0.006238</td>
      <td>0.087631</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(15.75, 21.0]</td>
      <td>10615</td>
      <td>0.920961</td>
      <td>0.028489</td>
      <td>9776.0</td>
      <td>839.0</td>
      <td>0.029456</td>
      <td>0.020608</td>
      <td>0.357194</td>
      <td>0.001256</td>
      <td>0.017125</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(21.0, 26.25]</td>
      <td>13366</td>
      <td>0.913287</td>
      <td>0.035872</td>
      <td>12207.0</td>
      <td>1159.0</td>
      <td>0.036780</td>
      <td>0.028468</td>
      <td>0.256171</td>
      <td>0.007673</td>
      <td>0.101023</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(26.25, 31.5]</td>
      <td>17130</td>
      <td>0.907589</td>
      <td>0.045974</td>
      <td>15547.0</td>
      <td>1583.0</td>
      <td>0.046844</td>
      <td>0.038883</td>
      <td>0.186265</td>
      <td>0.005698</td>
      <td>0.069906</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(31.5, 36.75]</td>
      <td>19881</td>
      <td>0.906292</td>
      <td>0.053357</td>
      <td>18018.0</td>
      <td>1863.0</td>
      <td>0.054289</td>
      <td>0.045760</td>
      <td>0.170902</td>
      <td>0.001297</td>
      <td>0.015363</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(36.75, 42.0]</td>
      <td>23129</td>
      <td>0.903584</td>
      <td>0.062074</td>
      <td>20899.0</td>
      <td>2230.0</td>
      <td>0.062970</td>
      <td>0.054775</td>
      <td>0.139419</td>
      <td>0.002708</td>
      <td>0.031483</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(42.0, 47.25]</td>
      <td>25065</td>
      <td>0.900499</td>
      <td>0.067270</td>
      <td>22571.0</td>
      <td>2494.0</td>
      <td>0.068007</td>
      <td>0.061260</td>
      <td>0.104497</td>
      <td>0.003086</td>
      <td>0.034922</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(47.25, 52.5]</td>
      <td>27817</td>
      <td>0.892943</td>
      <td>0.074656</td>
      <td>24839.0</td>
      <td>2978.0</td>
      <td>0.074841</td>
      <td>0.073148</td>
      <td>0.022882</td>
      <td>0.007556</td>
      <td>0.081615</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(52.5, 57.75]</td>
      <td>28710</td>
      <td>0.893870</td>
      <td>0.077053</td>
      <td>25663.0</td>
      <td>3047.0</td>
      <td>0.077324</td>
      <td>0.074843</td>
      <td>0.032612</td>
      <td>0.000927</td>
      <td>0.009730</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(57.75, 63.0]</td>
      <td>29724</td>
      <td>0.888642</td>
      <td>0.079774</td>
      <td>26414.0</td>
      <td>3310.0</td>
      <td>0.079587</td>
      <td>0.081303</td>
      <td>-0.021335</td>
      <td>0.005228</td>
      <td>0.053947</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(63.0, 68.25]</td>
      <td>28691</td>
      <td>0.883587</td>
      <td>0.077002</td>
      <td>25351.0</td>
      <td>3340.0</td>
      <td>0.076384</td>
      <td>0.082040</td>
      <td>-0.071433</td>
      <td>0.005055</td>
      <td>0.050099</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(68.25, 73.5]</td>
      <td>28089</td>
      <td>0.885542</td>
      <td>0.075386</td>
      <td>24874.0</td>
      <td>3215.0</td>
      <td>0.074947</td>
      <td>0.078969</td>
      <td>-0.052285</td>
      <td>0.001955</td>
      <td>0.019148</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(73.5, 78.75]</td>
      <td>25658</td>
      <td>0.875594</td>
      <td>0.068862</td>
      <td>22466.0</td>
      <td>3192.0</td>
      <td>0.067691</td>
      <td>0.078404</td>
      <td>-0.146925</td>
      <td>0.009948</td>
      <td>0.094640</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(78.75, 84.0]</td>
      <td>23882</td>
      <td>0.875513</td>
      <td>0.064095</td>
      <td>20909.0</td>
      <td>2973.0</td>
      <td>0.063000</td>
      <td>0.073025</td>
      <td>-0.147673</td>
      <td>0.000081</td>
      <td>0.000747</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(84.0, 89.25]</td>
      <td>20084</td>
      <td>0.871390</td>
      <td>0.053902</td>
      <td>17501.0</td>
      <td>2583.0</td>
      <td>0.052731</td>
      <td>0.063446</td>
      <td>-0.184974</td>
      <td>0.004123</td>
      <td>0.037302</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(89.25, 94.5]</td>
      <td>17238</td>
      <td>0.862513</td>
      <td>0.046264</td>
      <td>14868.0</td>
      <td>2370.0</td>
      <td>0.044798</td>
      <td>0.058214</td>
      <td>-0.261959</td>
      <td>0.008877</td>
      <td>0.076985</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(94.5, 99.75]</td>
      <td>10969</td>
      <td>0.856414</td>
      <td>0.029439</td>
      <td>9394.0</td>
      <td>1575.0</td>
      <td>0.028305</td>
      <td>0.038686</td>
      <td>-0.312465</td>
      <td>0.006100</td>
      <td>0.050505</td>
      <td>0.028212</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(99.75, 105.0]</td>
      <td>1098</td>
      <td>0.852459</td>
      <td>0.002947</td>
      <td>936.0</td>
      <td>162.0</td>
      <td>0.002820</td>
      <td>0.003979</td>
      <td>-0.344262</td>
      <td>0.003955</td>
      <td>0.031797</td>
      <td>0.028212</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable last_pymnt_amnt que como se puede notar en <a href="#tbl-iv-last_pymnt_amnt">Table&nbsp;23</a> tiene un IV [TODO] menor a 0.02 considerando valores menores o iguales a 20, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="26">
<div class="cell-output cell-output-display" data-execution_count="26">
<div id="tbl-iv-last_pymnt_amnt" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;23:  IV de last_pymnt_amnt </caption>
  <thead>
    <tr>
      <th></th>
      <th>last_pymnt_amnt_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-36.17, 12056.713]</td>
      <td>341581</td>
      <td>0.880708</td>
      <td>0.915698</td>
      <td>300833.0</td>
      <td>40748.0</td>
      <td>0.905431</td>
      <td>0.999362</td>
      <td>-0.098707</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.479178</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(12056.713, 24113.427]</td>
      <td>26386</td>
      <td>0.999204</td>
      <td>0.070735</td>
      <td>26365.0</td>
      <td>21.0</td>
      <td>0.079352</td>
      <td>0.000515</td>
      <td>5.037415</td>
      <td>0.118496</td>
      <td>5.136122</td>
      <td>0.479178</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(24113.427, 36170.14]</td>
      <td>5061</td>
      <td>0.999012</td>
      <td>0.013567</td>
      <td>5056.0</td>
      <td>5.0</td>
      <td>0.015217</td>
      <td>0.000123</td>
      <td>4.821038</td>
      <td>0.000192</td>
      <td>0.216377</td>
      <td>0.479178</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable collections_12_mths_ex_med que como se puede notar en <a href="#tbl-iv-collections_12_mths_ex_med">Table&nbsp;24</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 2, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="27">
<div class="cell-output cell-output-display" data-execution_count="27">
<div id="tbl-iv-collections_12_mths_ex_med" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;24:  IV de collections_12_mths_ex_med </caption>
  <thead>
    <tr>
      <th></th>
      <th>collections_12_mths_ex_med</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>369800</td>
      <td>0.890600</td>
      <td>0.991743</td>
      <td>329344.0</td>
      <td>40456.0</td>
      <td>0.991618</td>
      <td>0.992761</td>
      <td>-0.001152</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000203</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>2903</td>
      <td>0.902859</td>
      <td>0.007785</td>
      <td>2621.0</td>
      <td>282.0</td>
      <td>0.007892</td>
      <td>0.006920</td>
      <td>0.131364</td>
      <td>0.012259</td>
      <td>0.132516</td>
      <td>0.000203</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>176</td>
      <td>0.926136</td>
      <td>0.000472</td>
      <td>163.0</td>
      <td>13.0</td>
      <td>0.000491</td>
      <td>0.000319</td>
      <td>0.430761</td>
      <td>0.023277</td>
      <td>0.299397</td>
      <td>0.000203</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable acc_now_delinq que como se puede notar en <a href="#tbl-iv-acc_now_delinq">Table&nbsp;25</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 0, por lo que no la mantendremos para el ajuste del modelo pues además, como se puede notar en la misma tabla, es complicado realizar una división en intervalos suficiente para que dicha variable entregue un IV aceptable.</p>
<div class="cell" data-execution_count="28">
<div class="cell-output cell-output-display" data-execution_count="28">
<div id="tbl-iv-acc_now_delinq" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;25:  IV de acc_now_delinq </caption>
  <thead>
    <tr>
      <th></th>
      <th>acc_now_delinq_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-0.001, -0.0009]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(-0.0009, -0.0008]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(-0.0008, -0.0007]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(-0.0007, -0.0006]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(-0.0006, -0.0005]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(-0.0005, -0.0004]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(-0.0004, -0.0003]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(-0.0003, -0.0002]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(-0.0002, -0.0001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(-0.0001, 0.0]</td>
      <td>371635</td>
      <td>0.890656</td>
      <td>1.0</td>
      <td>330999.0</td>
      <td>40636.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(0.0, 0.0001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(0.0001, 0.0002]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(0.0002, 0.0003]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(0.0003, 0.0004]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(0.0004, 0.0005]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(0.0005, 0.0006]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(0.0006, 0.0007]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(0.0007, 0.0008]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(0.0008, 0.0009]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(0.0009, 0.001]</td>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable tot_coll_amt que como se puede notar en <a href="#tbl-iv-tot_coll_amt">Table&nbsp;26</a> tiene un IV menor a 0.02 considerando valores menores o iguales a 750, por lo que no la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="29">
<div class="cell-output cell-output-display" data-execution_count="29">
<div id="tbl-iv-tot_coll_amt" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;26:  IV de tot_coll_amt </caption>
  <thead>
    <tr>
      <th></th>
      <th>tot_coll_amt_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-0.75, 37.5]</td>
      <td>277245</td>
      <td>0.898509</td>
      <td>0.907696</td>
      <td>249107.0</td>
      <td>28138.0</td>
      <td>0.907662</td>
      <td>0.908000</td>
      <td>-0.000372</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(37.5, 75.0]</td>
      <td>4728</td>
      <td>0.888748</td>
      <td>0.015479</td>
      <td>4202.0</td>
      <td>526.0</td>
      <td>0.015311</td>
      <td>0.016974</td>
      <td>-0.103118</td>
      <td>0.009761</td>
      <td>0.102747</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(75.0, 112.5]</td>
      <td>4427</td>
      <td>0.880054</td>
      <td>0.014494</td>
      <td>3896.0</td>
      <td>531.0</td>
      <td>0.014196</td>
      <td>0.017135</td>
      <td>-0.188190</td>
      <td>0.008694</td>
      <td>0.085071</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(112.5, 150.0]</td>
      <td>2753</td>
      <td>0.912096</td>
      <td>0.009013</td>
      <td>2511.0</td>
      <td>242.0</td>
      <td>0.009149</td>
      <td>0.007809</td>
      <td>0.158365</td>
      <td>0.032042</td>
      <td>0.346555</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(150.0, 187.5]</td>
      <td>2097</td>
      <td>0.903672</td>
      <td>0.006866</td>
      <td>1895.0</td>
      <td>202.0</td>
      <td>0.006905</td>
      <td>0.006518</td>
      <td>0.057573</td>
      <td>0.008424</td>
      <td>0.100792</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(187.5, 225.0]</td>
      <td>2097</td>
      <td>0.907010</td>
      <td>0.006866</td>
      <td>1902.0</td>
      <td>195.0</td>
      <td>0.006930</td>
      <td>0.006293</td>
      <td>0.096529</td>
      <td>0.003338</td>
      <td>0.038955</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(225.0, 262.5]</td>
      <td>1633</td>
      <td>0.901408</td>
      <td>0.005346</td>
      <td>1472.0</td>
      <td>161.0</td>
      <td>0.005363</td>
      <td>0.005195</td>
      <td>0.031840</td>
      <td>0.005602</td>
      <td>0.064689</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(262.5, 300.0]</td>
      <td>1493</td>
      <td>0.911587</td>
      <td>0.004888</td>
      <td>1361.0</td>
      <td>132.0</td>
      <td>0.004959</td>
      <td>0.004260</td>
      <td>0.152040</td>
      <td>0.010179</td>
      <td>0.120200</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(300.0, 337.5]</td>
      <td>1206</td>
      <td>0.900498</td>
      <td>0.003948</td>
      <td>1086.0</td>
      <td>120.0</td>
      <td>0.003957</td>
      <td>0.003872</td>
      <td>0.021632</td>
      <td>0.011090</td>
      <td>0.130408</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(337.5, 375.0]</td>
      <td>1105</td>
      <td>0.907692</td>
      <td>0.003618</td>
      <td>1003.0</td>
      <td>102.0</td>
      <td>0.003655</td>
      <td>0.003291</td>
      <td>0.104645</td>
      <td>0.007195</td>
      <td>0.083013</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(375.0, 412.5]</td>
      <td>997</td>
      <td>0.889669</td>
      <td>0.003264</td>
      <td>887.0</td>
      <td>110.0</td>
      <td>0.003232</td>
      <td>0.003550</td>
      <td>-0.093769</td>
      <td>0.018023</td>
      <td>0.198413</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(412.5, 450.0]</td>
      <td>894</td>
      <td>0.919463</td>
      <td>0.002927</td>
      <td>822.0</td>
      <td>72.0</td>
      <td>0.002995</td>
      <td>0.002323</td>
      <td>0.253941</td>
      <td>0.029794</td>
      <td>0.347710</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(450.0, 487.5]</td>
      <td>764</td>
      <td>0.895288</td>
      <td>0.002501</td>
      <td>684.0</td>
      <td>80.0</td>
      <td>0.002492</td>
      <td>0.002582</td>
      <td>-0.035202</td>
      <td>0.024175</td>
      <td>0.289143</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(487.5, 525.0]</td>
      <td>735</td>
      <td>0.914286</td>
      <td>0.002406</td>
      <td>672.0</td>
      <td>63.0</td>
      <td>0.002449</td>
      <td>0.002033</td>
      <td>0.185990</td>
      <td>0.018998</td>
      <td>0.221192</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(525.0, 562.5]</td>
      <td>652</td>
      <td>0.900307</td>
      <td>0.002135</td>
      <td>587.0</td>
      <td>65.0</td>
      <td>0.002139</td>
      <td>0.002098</td>
      <td>0.019504</td>
      <td>0.013979</td>
      <td>0.166486</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(562.5, 600.0]</td>
      <td>627</td>
      <td>0.934609</td>
      <td>0.002053</td>
      <td>586.0</td>
      <td>41.0</td>
      <td>0.002135</td>
      <td>0.001323</td>
      <td>0.478615</td>
      <td>0.034303</td>
      <td>0.459110</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(600.0, 637.5]</td>
      <td>552</td>
      <td>0.923913</td>
      <td>0.001807</td>
      <td>510.0</td>
      <td>42.0</td>
      <td>0.001858</td>
      <td>0.001355</td>
      <td>0.315608</td>
      <td>0.010696</td>
      <td>0.163007</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(637.5, 675.0]</td>
      <td>512</td>
      <td>0.908203</td>
      <td>0.001676</td>
      <td>465.0</td>
      <td>47.0</td>
      <td>0.001694</td>
      <td>0.001517</td>
      <td>0.110757</td>
      <td>0.015710</td>
      <td>0.204851</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(675.0, 712.5]</td>
      <td>470</td>
      <td>0.874468</td>
      <td>0.001539</td>
      <td>411.0</td>
      <td>59.0</td>
      <td>0.001498</td>
      <td>0.001904</td>
      <td>-0.240077</td>
      <td>0.033735</td>
      <td>0.350834</td>
      <td>0.002297</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(712.5, 750.0]</td>
      <td>451</td>
      <td>0.864745</td>
      <td>0.001477</td>
      <td>390.0</td>
      <td>61.0</td>
      <td>0.001421</td>
      <td>0.001968</td>
      <td>-0.325860</td>
      <td>0.009723</td>
      <td>0.085783</td>
      <td>0.002297</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Continuaremos con la variable tot_cur_bal que como se puede notar en <a href="#tbl-iv-tot_cur_bal">Table&nbsp;27</a> tiene un IV mayor a 0.02 considerando valores menores o iguales a 500000, por lo que la mantendremos para el ajuste del modelo.</p>
<div class="cell" data-execution_count="30">
<div class="cell-output cell-output-display" data-execution_count="30">
<div id="tbl-iv-tot_cur_bal" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;27:  IV de tot_cur_bal </caption>
  <thead>
    <tr>
      <th></th>
      <th>tot_cur_bal_factor</th>
      <th>n_obs</th>
      <th>prop_good</th>
      <th>prop_n_obs</th>
      <th>n_good</th>
      <th>n_bad</th>
      <th>prop_n_good</th>
      <th>prop_n_bad</th>
      <th>WoE</th>
      <th>diff_prop_good</th>
      <th>diff_WoE</th>
      <th>IV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(-499.948, 19997.92]</td>
      <td>51777</td>
      <td>0.887749</td>
      <td>0.167921</td>
      <td>45965.0</td>
      <td>5812.0</td>
      <td>0.166088</td>
      <td>0.183976</td>
      <td>-0.102290</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(19997.92, 39995.84]</td>
      <td>56626</td>
      <td>0.883428</td>
      <td>0.183647</td>
      <td>50025.0</td>
      <td>6601.0</td>
      <td>0.180758</td>
      <td>0.208952</td>
      <td>-0.144944</td>
      <td>0.004321</td>
      <td>0.042654</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(39995.84, 59993.76]</td>
      <td>31038</td>
      <td>0.884851</td>
      <td>0.100661</td>
      <td>27464.0</td>
      <td>3574.0</td>
      <td>0.099237</td>
      <td>0.113133</td>
      <td>-0.131055</td>
      <td>0.001423</td>
      <td>0.013889</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(59993.76, 79991.68]</td>
      <td>17619</td>
      <td>0.887565</td>
      <td>0.057141</td>
      <td>15638.0</td>
      <td>1981.0</td>
      <td>0.056506</td>
      <td>0.062708</td>
      <td>-0.104144</td>
      <td>0.002714</td>
      <td>0.026911</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(79991.68, 99989.6]</td>
      <td>13189</td>
      <td>0.895367</td>
      <td>0.042774</td>
      <td>11809.0</td>
      <td>1380.0</td>
      <td>0.042670</td>
      <td>0.043683</td>
      <td>-0.023467</td>
      <td>0.007803</td>
      <td>0.080676</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>5</th>
      <td>(99989.6, 119987.52]</td>
      <td>11885</td>
      <td>0.899369</td>
      <td>0.038545</td>
      <td>10689.0</td>
      <td>1196.0</td>
      <td>0.038623</td>
      <td>0.037859</td>
      <td>0.019987</td>
      <td>0.004002</td>
      <td>0.043454</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>6</th>
      <td>(119987.52, 139985.44]</td>
      <td>12434</td>
      <td>0.895689</td>
      <td>0.040325</td>
      <td>11137.0</td>
      <td>1297.0</td>
      <td>0.040242</td>
      <td>0.041056</td>
      <td>-0.020027</td>
      <td>0.003680</td>
      <td>0.040014</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>7</th>
      <td>(139985.44, 159983.36]</td>
      <td>12652</td>
      <td>0.901755</td>
      <td>0.041032</td>
      <td>11409.0</td>
      <td>1243.0</td>
      <td>0.041225</td>
      <td>0.039347</td>
      <td>0.046629</td>
      <td>0.006065</td>
      <td>0.066656</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>8</th>
      <td>(159983.36, 179981.28]</td>
      <td>13090</td>
      <td>0.905195</td>
      <td>0.042453</td>
      <td>11849.0</td>
      <td>1241.0</td>
      <td>0.042815</td>
      <td>0.039283</td>
      <td>0.086080</td>
      <td>0.003440</td>
      <td>0.039451</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>9</th>
      <td>(179981.28, 199979.2]</td>
      <td>12156</td>
      <td>0.902270</td>
      <td>0.039424</td>
      <td>10968.0</td>
      <td>1188.0</td>
      <td>0.039631</td>
      <td>0.037606</td>
      <td>0.052465</td>
      <td>0.002924</td>
      <td>0.033615</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>10</th>
      <td>(199979.2, 219977.12]</td>
      <td>10899</td>
      <td>0.905588</td>
      <td>0.035347</td>
      <td>9870.0</td>
      <td>1029.0</td>
      <td>0.035664</td>
      <td>0.032573</td>
      <td>0.090666</td>
      <td>0.003317</td>
      <td>0.038202</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>11</th>
      <td>(219977.12, 239975.04]</td>
      <td>9747</td>
      <td>0.912076</td>
      <td>0.031611</td>
      <td>8890.0</td>
      <td>857.0</td>
      <td>0.032123</td>
      <td>0.027128</td>
      <td>0.168998</td>
      <td>0.006488</td>
      <td>0.078332</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>12</th>
      <td>(239975.04, 259972.96]</td>
      <td>8852</td>
      <td>0.916403</td>
      <td>0.028708</td>
      <td>8112.0</td>
      <td>740.0</td>
      <td>0.029312</td>
      <td>0.023424</td>
      <td>0.224204</td>
      <td>0.004328</td>
      <td>0.055205</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>13</th>
      <td>(259972.96, 279970.88]</td>
      <td>7514</td>
      <td>0.922145</td>
      <td>0.024369</td>
      <td>6929.0</td>
      <td>585.0</td>
      <td>0.025037</td>
      <td>0.018518</td>
      <td>0.301613</td>
      <td>0.005742</td>
      <td>0.077409</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>14</th>
      <td>(279970.88, 299968.8]</td>
      <td>6749</td>
      <td>0.920581</td>
      <td>0.021888</td>
      <td>6213.0</td>
      <td>536.0</td>
      <td>0.022450</td>
      <td>0.016967</td>
      <td>0.280019</td>
      <td>0.001565</td>
      <td>0.021594</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>15</th>
      <td>(299968.8, 319966.72]</td>
      <td>5809</td>
      <td>0.923911</td>
      <td>0.018839</td>
      <td>5367.0</td>
      <td>442.0</td>
      <td>0.019393</td>
      <td>0.013991</td>
      <td>0.326469</td>
      <td>0.003330</td>
      <td>0.046450</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>16</th>
      <td>(319966.72, 339964.64]</td>
      <td>4951</td>
      <td>0.924460</td>
      <td>0.016057</td>
      <td>4577.0</td>
      <td>374.0</td>
      <td>0.016538</td>
      <td>0.011839</td>
      <td>0.334297</td>
      <td>0.000549</td>
      <td>0.007829</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>17</th>
      <td>(339964.64, 359962.56]</td>
      <td>4347</td>
      <td>0.928226</td>
      <td>0.014098</td>
      <td>4035.0</td>
      <td>312.0</td>
      <td>0.014580</td>
      <td>0.009876</td>
      <td>0.389512</td>
      <td>0.003767</td>
      <td>0.055215</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>18</th>
      <td>(359962.56, 379960.48]</td>
      <td>3702</td>
      <td>0.919503</td>
      <td>0.012006</td>
      <td>3404.0</td>
      <td>298.0</td>
      <td>0.012300</td>
      <td>0.009433</td>
      <td>0.265367</td>
      <td>0.008723</td>
      <td>0.124145</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>19</th>
      <td>(379960.48, 399958.4]</td>
      <td>3180</td>
      <td>0.938365</td>
      <td>0.010313</td>
      <td>2984.0</td>
      <td>196.0</td>
      <td>0.010782</td>
      <td>0.006204</td>
      <td>0.552659</td>
      <td>0.018862</td>
      <td>0.287292</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>20</th>
      <td>(399958.4, 419956.32]</td>
      <td>2788</td>
      <td>0.930057</td>
      <td>0.009042</td>
      <td>2593.0</td>
      <td>195.0</td>
      <td>0.009369</td>
      <td>0.006173</td>
      <td>0.417325</td>
      <td>0.008307</td>
      <td>0.135334</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>21</th>
      <td>(419956.32, 439954.24]</td>
      <td>2358</td>
      <td>0.916879</td>
      <td>0.007647</td>
      <td>2162.0</td>
      <td>196.0</td>
      <td>0.007812</td>
      <td>0.006204</td>
      <td>0.230428</td>
      <td>0.013179</td>
      <td>0.186897</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>22</th>
      <td>(439954.24, 459952.16]</td>
      <td>1938</td>
      <td>0.935501</td>
      <td>0.006285</td>
      <td>1813.0</td>
      <td>125.0</td>
      <td>0.006551</td>
      <td>0.003957</td>
      <td>0.504179</td>
      <td>0.018622</td>
      <td>0.273750</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>23</th>
      <td>(459952.16, 479950.08]</td>
      <td>1720</td>
      <td>0.938372</td>
      <td>0.005578</td>
      <td>1614.0</td>
      <td>106.0</td>
      <td>0.005832</td>
      <td>0.003355</td>
      <td>0.552786</td>
      <td>0.002872</td>
      <td>0.048607</td>
      <td>0.028546</td>
    </tr>
    <tr>
      <th>24</th>
      <td>(479950.08, 499948.0]</td>
      <td>1322</td>
      <td>0.934191</td>
      <td>0.004287</td>
      <td>1235.0</td>
      <td>87.0</td>
      <td>0.004462</td>
      <td>0.002754</td>
      <td>0.482672</td>
      <td>0.004181</td>
      <td>0.070114</td>
      <td>0.028546</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>
<p>Así terminamos con un total de 12 variables categóricas y numéricas:</p>
<ul>
<li>‘purpose’</li>
<li>‘verification_status’</li>
<li>‘home_ownership’</li>
<li>‘tot_cur_bal’</li>
<li>‘dti’</li>
<li>‘inq_last_6mths’</li>
<li>‘out_prncp’</li>
<li>‘int_rate’</li>
<li>‘term’</li>
<li>‘annual_inc’</li>
<li>‘revol_util’</li>
<li>‘grade’</li>
</ul>
</section>
</section>
<section id="ajuste-del-modelo-y-realización-de-scorecard" class="level2">
<h2 class="anchored" data-anchor-id="ajuste-del-modelo-y-realización-de-scorecard">Ajuste del modelo y realización de Scorecard</h2>
<p>Para continuar con el ajuste del modelo ya con las variables escogidas se hará una pipeline que tratará el conjunto de datos de diferentes maneras: Para las variables continuas se crearán variables dummies de intervalos, el último de ellos tendiendo a infinito, y se transformará el valor de la variable de cada observación en 1 y 0’s de acuerdo al intervalo en el que caiga dicho valor. Para las variables categórica simplemente se crearán variabes dummies y se procederá como un OneHotEncoding normal. Esto se puede observar en <a href="#tbl-pre-datos-1">Table&nbsp;28</a>.</p>
<div class="cell" data-execution_count="31">
<div class="cell-output cell-output-display" data-execution_count="31">
<div id="tbl-pre-datos-1" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;28:  Preprocesamiento total de datos </caption>
  <thead>
    <tr>
      <th></th>
      <th>grade:A</th>
      <th>grade:B</th>
      <th>grade:C</th>
      <th>grade:D</th>
      <th>grade:E</th>
      <th>grade:F</th>
      <th>grade:G</th>
      <th>...</th>
      <th>out_prncp:10,291-15,437</th>
      <th>out_prncp:&gt;15,437</th>
      <th>tot_cur_bal:0-100000</th>
      <th>tot_cur_bal:100000-200000</th>
      <th>tot_cur_bal:200000-300000</th>
      <th>tot_cur_bal:300000-400000</th>
      <th>tot_cur_bal:400000-500000</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>456615</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>451541</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>394474</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>110294</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>139343</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>163633</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>399306</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>57787</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>81641</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>38736</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>373028 rows × 71 columns</p>
</div>
</div>
</div>
</div>
<section id="ajuste-del-modelo" class="level3">
<h3 class="anchored" data-anchor-id="ajuste-del-modelo">Ajuste del modelo</h3>
<p>Para el ajuste del modelo se usará regresión logística cuyos parametros serán, y de acuerdo a un GridSearchCV realizado, max_iter=1000 y class_weight=‘auto’. A dicho modelo se la pasará un conjunto de datos que habrá pasado por la pipeline mencionada anteriormente:</p>
<div class="cell" data-execution_count="32">
<div class="cell-output cell-output-display" data-execution_count="32">
<div id="tbl-model-summary" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;29:  Resumen del modelo entrenado </caption>
  <thead>
    <tr>
      <th></th>
      <th>Feature name</th>
      <th>Coefficients</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Intercept</td>
      <td>3.372336</td>
    </tr>
    <tr>
      <th>1</th>
      <td>grade:A</td>
      <td>0.764690</td>
    </tr>
    <tr>
      <th>2</th>
      <td>grade:B</td>
      <td>0.454917</td>
    </tr>
    <tr>
      <th>3</th>
      <td>grade:C</td>
      <td>0.159338</td>
    </tr>
    <tr>
      <th>4</th>
      <td>grade:D</td>
      <td>-0.029625</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>67</th>
      <td>tot_cur_bal:0-100000</td>
      <td>-0.303520</td>
    </tr>
    <tr>
      <th>68</th>
      <td>tot_cur_bal:100000-200000</td>
      <td>-0.303168</td>
    </tr>
    <tr>
      <th>69</th>
      <td>tot_cur_bal:200000-300000</td>
      <td>-0.239514</td>
    </tr>
    <tr>
      <th>70</th>
      <td>tot_cur_bal:300000-400000</td>
      <td>-0.195303</td>
    </tr>
    <tr>
      <th>71</th>
      <td>tot_cur_bal:400000-500000</td>
      <td>-0.189118</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 2 columns</p>
</div>
</div>
</div>
</div>
<p>Ya con el modelo entrenado y con coeficientes para cada una de las variables como se puede ver en <a href="#tbl-model-summary">Table&nbsp;29</a> se procederán a analizar resultados del ajuste:</p>
<div id="fig-matriz-corr-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="fig-matriz-corr-1-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
<p></p><figcaption class="figure-caption">(a) Matriz de confusión</figcaption><p></p>
</figure>
</div>
<div class="cell-output cell-output-display">
<div id="fig-matriz-corr-1-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig-matriz-corr-1-output-2.png" data-ref-parent="fig-matriz-corr-1" width="562" height="411" class="figure-img"></p>
<p></p><figcaption class="figure-caption">(b)</figcaption><p></p>
</figure>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
<p>Como se puede ver en <a href="#fig-matriz-corr-1">Figure&nbsp;2</a> el modelo ajustado es muy bueno para predecir verdaderos positivos, pero no para verdaderos negativos que los termina pasando como falsos positivos, lo que en contexto significaría otorgar créditos a muchas personas.</p>
<div id="fig-roc-curve-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="fig-roc-curve-1-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<pre><code>Text(0.5, 1.0, 'ROC curve')</code></pre>
<p></p><figcaption class="figure-caption">(a) Curva de</figcaption><p></p>
</figure>
</div>
<div class="cell-output cell-output-display">
<div id="fig-roc-curve-1-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig-roc-curve-1-output-2.png" data-ref-parent="fig-roc-curve-1" width="589" height="449" class="figure-img"></p>
<p></p><figcaption class="figure-caption">(b)</figcaption><p></p>
</figure>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
<p>En <a href="#fig-roc-curve-1">Figure&nbsp;3</a> podemos observar el rendimiento de la curva de roc donde se nota que la convergencia a uno es relativamente rápida. Por otra parte obtenemos un valor AUROC de 0.7751, es decir la probabilidad de que a una persona le aprueben un crédito y que en efecto cumple las caracteristicas para ser aprobado es del 77%.</p>
</section>
<section id="creación-de-scorecard" class="level3">
<h3 class="anchored" data-anchor-id="creación-de-scorecard">Creación de scorecard</h3>
<p>Para comenzar, aquellos coeficientes obtenidos anteriormente se deben escalar con respecto a la escala escogida, en este caso vamos a basarnos en los puntajes establecidos por FICO que se encuentran en el intervalo 300-850. Una vez escalados los redondeamos para obtener el score preliminar.</p>
<p>Al calcular el máximo y el mínimo valor obtenido con el score preliminar: <a href="#tbl-scard-1">Table&nbsp;30</a> encontramos que el máximo es 851 que se pasa de el limite establecido inicialmente, para corregir esto sin afectar mucho el modelo inicial vamos a encontrar la máxima diferencia entre el score calculado y el preliminar entre los mayores valores de cada categoría, y a este le restamos uno.</p>
<div class="cell" data-execution_count="35">
<div class="cell-output cell-output-display" data-execution_count="35">
<div id="tbl-scard-1" class="anchored">

<div>

<table class="dataframe table table-sm table-striped"><caption>Table&nbsp;30:  Scorecard preliminar </caption>
  <thead>
    <tr>
      <th></th>
      <th>index</th>
      <th>Feature name</th>
      <th>Coefficients</th>
      <th>Original feature name</th>
      <th>Score - Calculation</th>
      <th>Score - Preliminary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Intercept</td>
      <td>3.372336</td>
      <td>Intercept</td>
      <td>624.322449</td>
      <td>624.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>grade:A</td>
      <td>0.764690</td>
      <td>grade</td>
      <td>53.940674</td>
      <td>54.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>grade:B</td>
      <td>0.454917</td>
      <td>grade</td>
      <td>32.089486</td>
      <td>32.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>grade:C</td>
      <td>0.159338</td>
      <td>grade</td>
      <td>11.239568</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>grade:D</td>
      <td>-0.029625</td>
      <td>grade</td>
      <td>-2.089724</td>
      <td>-2.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>79</th>
      <td>7</td>
      <td>purpose:major_purchcarhome_impr</td>
      <td>0.000000</td>
      <td>purpose</td>
      <td>0.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>80</th>
      <td>8</td>
      <td>verification_status:Not Verified</td>
      <td>0.000000</td>
      <td>verification_status</td>
      <td>0.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>81</th>
      <td>9</td>
      <td>home_ownership:MORTGAGE</td>
      <td>0.000000</td>
      <td>home_ownership</td>
      <td>0.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>82</th>
      <td>10</td>
      <td>grade:G</td>
      <td>0.000000</td>
      <td>grade</td>
      <td>0.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>83</th>
      <td>11</td>
      <td>tot_cur_bal:0-100000</td>
      <td>0.000000</td>
      <td>tot_cur_bal</td>
      <td>0.000000</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>84 rows × 6 columns</p>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="referencias" class="level2">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">Referencias</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-IntroML" class="csl-entry" role="doc-biblioentry">
Andreas C. Müller, Sarah Guido. 2016. <em>Introduction to Machine Learning with Python</em>. O’Reilly Media, Inc.
</div>
<div id="ref-HandsOn" class="csl-entry" role="doc-biblioentry">
Géron, Aurélien. 2019. <em>Hands-on Machine Learning with Scikit-Learn, Keras, and TensorFlow, 2nd Edition</em>. O’Reilly Media, Inc.
</div>
<div id="ref-DataWebsite" class="csl-entry" role="doc-biblioentry">
U.S. Department of Education. 2016. <span>“Cluster Analysis Challenge.”</span> 2016. <a href="https://data.world/exercises/cluster-analysis-exercise-2">https://data.world/exercises/cluster-analysis-exercise-2</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>